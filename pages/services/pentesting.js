// pages/services/pentesting.js - Penetration Testing Service
import Head from 'next/head';
import { motion } from 'framer-motion';
import { Shield, Lock, Server, Zap, Layers, TrendingUp, AlertTriangle, Code } from 'react-feather';
import Link from 'next/link';
import { useState } from 'react';
import ScrollReveal from '../../components/ui/ScrollReveal';
import styles from '../../styles/SolutionPage.module.css';

export default function PentestService() {
  const [selectedPhase, setSelectedPhase] = useState(0);

  return (
    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} transition={{ duration: 0.5 }}>
      <Head>
        <title>Blue Ridge Penetration Testing — Offensive Security & Red-Team Services</title>
        <meta name="description" content="External and internal penetration testing, privilege escalation, Active Directory abuse, lateral movement, and post-exploitation testing." />
      </Head>

      {/* HERO - Red Team Attack Narrative - PREMIUM ENHANCED */}
      <section id="hero" className={styles.solutionHero} style={{background:'linear-gradient(135deg, rgba(255,50,50,0.08) 0%, rgba(200,50,50,0.04) 100%)', position:'relative', overflow:'hidden'}}>
        {/* Animated gradient backgrounds */}
        <motion.div
          animate={{opacity:[0.1, 0.2, 0.1]}}
          transition={{duration:4, repeat:Infinity}}
          style={{
            position:'absolute',
            top:'-50%',
            right:'-20%',
            width:'600px',
            height:'600px',
            background:'radial-gradient(circle, rgba(255,80,80,0.15) 0%, transparent 70%)',
            borderRadius:'50%',
            zIndex:0,
            filter:'blur(40px)'
          }}
        />
        <motion.div
          animate={{opacity:[0.05, 0.15, 0.05]}}
          transition={{duration:5, repeat:Infinity, delay:0.5}}
          style={{
            position:'absolute',
            bottom:'-30%',
            left:'10%',
            width:'500px',
            height:'500px',
            background:'radial-gradient(circle, rgba(200,50,50,0.1) 0%, transparent 70%)',
            borderRadius:'50%',
            zIndex:0,
            filter:'blur(40px)'
          }}
        />
        
        <div className="container" style={{position:'relative', zIndex:2}}>
          <ScrollReveal>
            <div className={styles.contentNarrow + ' ' + styles.centerText}>
              <motion.div initial={{scale:0, rotate:-180}} animate={{scale:1, rotate:0}} transition={{duration:0.8, type:'spring', stiffness:100}} style={{display:'inline-block', marginBottom:'2rem'}}>
                <motion.div
                  animate={{rotate:[0,-360]}}
                  transition={{duration:25, repeat:Infinity, ease:'linear'}}
                  style={{display:'flex', alignItems:'center', justifyContent:'center'}}
                >
                  <AlertTriangle size={100} style={{color:'#ff5252'}} strokeWidth={1.5} />
                </motion.div>
              </motion.div>
              <h1 className={styles.heroTitle} style={{fontSize:'3.8rem', letterSpacing:'-1.5px', textShadow:'0 10px 30px rgba(255,80,80,0.2)'}}>
                <span style={{color:'#ff5252'}}>We Attack Like Your Adversaries.</span>
                <span className={styles.heroTitlePlain}> You Defend Like a Professional.</span>
              </h1>
              <h2 className={styles.heroSubtitle} style={{fontSize:'1.4rem', fontWeight:500}}>Comprehensive penetration testing that finds what attackers find — before they do.</h2>
              <p className={styles.heroDescription} style={{fontSize:'1.05rem', lineHeight:1.8}}>External networks, internal systems, Active Directory, lateral movement, privilege escalation, and post-exploitation — we test it all.</p>
              <Link href="/contact" legacyBehavior>
                <a className="btn btn-primary" style={{display:'inline-flex', alignItems:'center', gap:'0.7rem', padding:'1.2rem 3rem', fontSize:'1.08rem'}} onClick={() => window.dispatchEvent(new CustomEvent('analytics.cta',{detail:{location:'hero'}}))}>Request Engagement Scope <TrendingUp size={22} /></a>
              </Link>
            </div>
          </ScrollReveal>
        </div>
      </section>

      {/* TESTING PHASES - Linear progression through attack chain */}
      <section className={styles.solutionSection}>
        <div className="container">
          <ScrollReveal>
            <h2 className={styles.sectionTitle}>Our Testing Methodology</h2>
            <p style={{textAlign:'center', fontSize:'0.95rem', color:'var(--color-text-muted-dark)', marginBottom:'2rem', maxWidth:'700px', margin:'0 auto 2rem'}}>
              We follow the real attack chain: reconnaissance, exploitation, lateral movement, persistence, and impact.
            </p>
          </ScrollReveal>

          {/* Phase Navigation */}
          <div style={{display:'flex', gap:'0.5rem', marginBottom:'2rem', overflowX:'auto', justifyContent:'center', flexWrap:'wrap'}}>
            {[
                      {phase:'External', icon:Server},
              {phase:'Internal', icon:Lock},
              {phase:'Privilege Escalation', icon:TrendingUp},
              {phase:'Lateral Movement', icon:Layers},
              {phase:'Persistence', icon:Shield},
              {phase:'Data Exfiltration', icon:Code}
            ].map((item, i) => (
              <motion.button
                key={i}
                onClick={() => setSelectedPhase(i)}
                whileHover={{scale:1.05}}
                style={{
                  padding:'0.7rem 1.2rem',
                  borderRadius:'6px',
                  border: selectedPhase === i ? '2px solid #ff5252' : '1px solid rgba(255,80,80,0.3)',
                  background: selectedPhase === i ? 'rgba(255,50,50,0.15)' : 'rgba(255,50,50,0.05)',
                  color:'inherit',
                  cursor:'pointer',
                  transition:'all 0.3s ease',
                  fontSize:'0.9rem',
                  fontWeight: selectedPhase === i ? 700 : 500
                }}
              >
                <item.icon size={16} style={{display:'inline', marginRight:'0.4rem'}} />
                {item.phase}
              </motion.button>
            ))}
          </div>

          {/* Phase Details */}
          <ScrollReveal>
            <motion.div
              key={selectedPhase}
              initial={{opacity:0, x:20}}
              animate={{opacity:1, x:0}}
              transition={{duration:0.3}}
              style={{
                background:'linear-gradient(135deg, rgba(255,50,50,0.08) 0%, rgba(200,50,50,0.04) 100%)',
                border:'1px solid rgba(255,80,80,0.2)',
                borderRadius:'12px',
                padding:'2rem',
                maxWidth:'1000px',
                margin:'0 auto'
              }}
            >
              <div style={{display:'grid', gridTemplateColumns:'1fr 1fr', gap:'2rem', alignItems:'center'}}>
                <div>
                  <h3 style={{fontSize:'1.4rem', fontWeight:700, marginBottom:'1rem', color:'#ff5252'}}>
                    {['External Reconnaissance', 'Internal Network Testing', 'Privilege Escalation', 'Lateral Movement', 'Persistence & Backdoors', 'Data Exfiltration Tests'][selectedPhase]}
                  </h3>
                  <p style={{lineHeight:1.7, marginBottom:'1.2rem', color:'var(--color-text-muted-dark)'}}>
                    {[
                      'Scan external IP ranges, DNS records, cloud instances, and third-party services. Identify open ports, vulnerable services, default credentials, and misconfigurations.',
                      'Test internal network segmentation, VLAN isolation, and East-West traffic. Scan for unpatched systems, weak credentials, and exposed services.',
                      'Exploit local vulnerabilities to gain elevated privileges. Test kernel exploits, Windows privilege escalation, and sudo/sudo-like misconfigurations.',
                      'Use compromised accounts to pivot through the network. Test Active Directory attacks, Kerberoasting, and lateral movement techniques.',
                      'Establish persistence mechanisms to maintain access. Test backdoors, scheduled tasks, registry modifications, and firmware implants.',
                      'Simulate data theft and exfiltration. Test firewall evasion, DNS tunneling, HTTPS exfiltration, and DLP bypass techniques.'
                    ][selectedPhase]}
                  </p>
                  <ul style={{listStyle:'none', padding:0, margin:0}}>
                    {[
                      ['Port scanning & fingerprinting', 'Certificate analysis', 'Cloud asset discovery'],
                      ['Network mapping', 'Service enumeration', 'Default credential testing'],
                      ['Kernel exploit chains', 'UAC bypass', 'Sudo misconfig abuse'],
                      ['Kerberos attacks', 'Pass-the-hash techniques', 'Lateral movement via shares'],
                      ['Registry persistence', 'Scheduled task backdoors', 'WMI event subscriptions'],
                      ['DNS tunneling tests', 'HTTP/S exfil chains', 'Firewall segmentation bypass']
                    ][selectedPhase].map((item, i) => (
                      <li key={i} style={{marginBottom:'0.5rem', fontSize:'0.9rem'}}>
                        ✓ {item}
                      </li>
                    ))}
                  </ul>
                </div>
                <motion.div
                  animate={{y:[0,15,0]}}
                  transition={{duration:3, repeat:Infinity}}
                  style={{
                    background:'rgba(255,50,50,0.05)',
                    border:'2px dashed rgba(255,80,80,0.3)',
                    borderRadius:'12px',
                    padding:'2rem',
                    textAlign:'center'
                  }}
                >
                  <div style={{fontSize:'0.95rem', fontWeight:700, marginBottom:'1rem', color:'#ff5252'}}>ATTACK PHASE {selectedPhase + 1} of 6</div>
                  <div style={{fontSize:'2.2rem', fontWeight:700, color:'#ff5252', marginBottom:'0.5rem'}}>
                    {['Discovery', 'Access', 'Escalation', 'Exploitation', 'Embedded', 'Exfiltration'][selectedPhase]}
                  </div>
                  <div style={{fontSize:'0.85rem', color:'var(--color-text-muted-dark)', lineHeight:1.6}}>
                    Average duration: {['2-3 weeks', '1-2 weeks', '3-5 days', '2-3 weeks', '1-2 weeks', '3-5 days'][selectedPhase]}
                  </div>
                </motion.div>
              </div>
            </motion.div>
          </ScrollReveal>
        </div>
      </section>

      {/* SPECIALIZED TESTING AREAS */}
      <section className={styles.solutionSection} style={{background:'rgba(255,50,50,0.02)'}}>
        <div className="container">
          <ScrollReveal>
            <h2 className={styles.sectionTitle}>Specialized Testing Capabilities</h2>
          </ScrollReveal>

          <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))', gap:'1.5rem', maxWidth:'1200px', margin:'0 auto'}}>
            {[
              {
                icon:Lock,
                title:'Active Directory Attacks',
                items:['User enumeration & spraying', 'Kerberoasting & golden tickets', 'Delegation abuse', 'ACL enumeration & exploitation']
              },
              {
                icon:Server,
                title:'Network Segmentation Testing',
                items:['VLAN hopping', 'Firewall rule validation', 'Inter-subnet communication', 'Wireless isolation review']
              },
              {
                icon:Shield,
                title:'Physical & Facility Security',
                items:['Keycard & badge cloning', 'Facility walkthrough', 'Camera blind-spot mapping', 'Access control testing']
              },
              {
                icon:Code,
                title:'Endpoint Bypass Testing',
                items:['EDR/AV evasion', 'Sandbox breakout', 'Exploit reliability testing', 'Defense mechanism bypass']
              },
              {
                icon:Zap,
                title:'Firewall & WAF Testing',
                items:['ACL rule validation', 'Protocol-level evasion', 'IDS/IPS bypass', 'DLP effectiveness testing']
              },
              {
                icon:AlertTriangle,
                title:'Post-Exploitation',
                items:['Credential harvesting', 'Session hijacking', 'Persistence mechanisms', 'Privilege maintenance']
              }
            ].map((area, i) => (
              <ScrollReveal key={i}>
                <motion.div
                  whileHover={{y:-8}}
                  style={{
                    background:'linear-gradient(135deg, rgba(255,50,50,0.08) 0%, rgba(200,50,50,0.04) 100%)',
                    border:'1px solid rgba(255,80,80,0.15)',
                    borderRadius:'12px',
                    padding:'1.5rem'
                  }}
                >
                  <area.icon size={36} style={{color:'#ff5252', marginBottom:'1rem'}} />
                  <h3 style={{fontSize:'1.1rem', fontWeight:700, marginBottom:'1rem'}}>{area.title}</h3>
                  <ul style={{listStyle:'none', padding:0, margin:0}}>
                    {area.items.map((item, j) => (
                      <li key={j} style={{marginBottom:'0.6rem', fontSize:'0.9rem', lineHeight:1.5}}>
                        → {item}
                      </li>
                    ))}
                  </ul>
                </motion.div>
              </ScrollReveal>
            ))}
          </div>
        </div>
      </section>

      {/* DELIVERABLES - What you get */}
      <section className={styles.solutionSection}>
        <div className="container">
          <ScrollReveal>
            <h2 className={styles.sectionTitle}>Root-Cause Analysis & Remediation Guidance</h2>
            <p style={{textAlign:'center', fontSize:'0.95rem', color:'var(--color-text-muted-dark)', marginBottom:'2rem', maxWidth:'800px', margin:'0 auto 2rem'}}>
              We don't just find vulnerabilities — we explain why they matter and how to fix them properly.
            </p>
          </ScrollReveal>

          <div style={{display:'grid', gridTemplateColumns:'1fr 1fr', gap:'2rem', maxWidth:'1100px', margin:'0 auto'}}>
            <ScrollReveal>
              <motion.div
                animate={{borderColor:['rgba(255,80,80,0.2)', 'rgba(255,80,80,0.5)', 'rgba(255,80,80,0.2)']}}
                transition={{duration:2, repeat:Infinity}}
                style={{
                  background:'rgba(255,50,50,0.05)',
                  border:'2px solid rgba(255,80,80,0.2)',
                  borderRadius:'12px',
                  padding:'2rem'
                }}
              >
                <h3 style={{fontSize:'1.2rem', fontWeight:700, marginBottom:'1.5rem'}}>Technical Report</h3>
                <ul style={{listStyle:'none', padding:0, margin:0}}>
                  {[
                    'Complete attack path documentation',
                    'Proof-of-concept exploit code',
                    'Step-by-step reproduction',
                    'Root cause identification',
                    'CVSS & risk scoring',
                    'Remediation priority ranking'
                  ].map((item, i) => (
                    <li key={i} style={{marginBottom:'0.8rem', display:'flex', gap:'0.6rem'}}>
                      <span style={{color:'#ff5252', fontWeight:700}}>→</span>
                      <span>{item}</span>
                    </li>
                  ))}
                </ul>
              </motion.div>
            </ScrollReveal>

            <ScrollReveal>
              <motion.div
                animate={{borderColor:['rgba(255,80,80,0.2)', 'rgba(255,80,80,0.5)', 'rgba(255,80,80,0.2)']}}
                transition={{duration:2, repeat:Infinity, delay:0.3}}
                style={{
                  background:'rgba(255,50,50,0.05)',
                  border:'2px solid rgba(255,80,80,0.2)',
                  borderRadius:'12px',
                  padding:'2rem'
                }}
              >
                <h3 style={{fontSize:'1.2rem', fontWeight:700, marginBottom:'1.5rem'}}>Executive Briefing</h3>
                <ul style={{listStyle:'none', padding:0, margin:0}}>
                  {[
                    'Business impact of findings',
                    'Risk to revenue & operations',
                    'Compliance & regulatory exposure',
                    'Industry benchmark comparison',
                    'Prioritized fix recommendations',
                    'Budget & timeline estimate'
                  ].map((item, i) => (
                    <li key={i} style={{marginBottom:'0.8rem', display:'flex', gap:'0.6rem'}}>
                      <span style={{color:'#ff5252', fontWeight:700}}>→</span>
                      <span>{item}</span>
                    </li>
                  ))}
                </ul>
              </motion.div>
            </ScrollReveal>
          </div>
        </div>
      </section>

      {/* BLUE RIDGE SCOUT - Embedded testing tool */}
      <section className={styles.solutionSection} style={{background:'linear-gradient(135deg, rgba(255,50,50,0.04) 0%, rgba(200,50,50,0.02) 100%)'}}>
        <div className="container">
          <ScrollReveal>
            <h2 className={styles.sectionTitle}>Blue Ridge Scout™ — Embedded Testing Platform</h2>
            <p style={{textAlign:'center', fontSize:'0.95rem', color:'var(--color-text-muted-dark)', marginBottom:'2rem', maxWidth:'800px', margin:'0 auto 2rem'}}>
              Deploy Scout as a physical Raspberry Pi or virtual machine inside your environment for continuous, audited testing.
            </p>
          </ScrollReveal>

          <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(220px, 1fr))', gap:'1rem', maxWidth:'1100px', margin:'0 auto'}}>
            {[
              {label:'Deployment', items:['Physical Raspberry Pi', 'Virtual Machine', 'Container deployment', 'PoE or external power']},
              {label:'Security', items:['Zero-trust VPN tunnel', 'Full audit logging', 'No credential storage', 'Read-only passive mode']},
              {label:'Capabilities', items:['Secure telemetry', 'Remote ingress control', 'Network reconnaissance', 'Data collection & analysis']},
              {label:'Benefits', items:['Persistent testing', 'Reduced engagement overhead', 'Compliance-ready logs', 'Continuous threat simulation']}
            ].map((group, i) => (
              <ScrollReveal key={i}>
                <motion.div
                  whileHover={{y:-4}}
                  style={{
                    background:'linear-gradient(135deg, rgba(255,50,50,0.08) 0%, rgba(200,50,50,0.04) 100%)',
                    border:'1px solid rgba(255,80,80,0.15)',
                    borderRadius:'12px',
                    padding:'1.5rem',
                    textAlign:'center'
                  }}
                >
                  <h3 style={{fontSize:'1rem', fontWeight:700, marginBottom:'1rem', color:'#ff5252'}}>{group.label}</h3>
                  <ul style={{listStyle:'none', padding:0, margin:0}}>
                    {group.items.map((item, j) => (
                      <li key={j} style={{marginBottom:'0.5rem', fontSize:'0.9rem'}}>{item}</li>
                    ))}
                  </ul>
                </motion.div>
              </ScrollReveal>
            ))}
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className={styles.solutionSection}>
        <div className="container">
          <ScrollReveal>
            <div className={styles.contentNarrow + ' ' + styles.centerText}>
              <h2 style={{fontSize:'1.6rem', fontWeight:700, marginBottom:'1rem'}}>Ready to Be Tested?</h2>
              <p style={{fontSize:'1rem', lineHeight:1.7, marginBottom:'1.5rem', color:'var(--color-text-muted-dark)'}}>
                Define your scope. We'll find what attackers find. Then we'll help you fix it before they exploit it.
              </p>
              <Link href="/contact" legacyBehavior>
                <a className="btn btn-primary" onClick={() => window.dispatchEvent(new CustomEvent('analytics.cta',{detail:{location:'final'}}))}>Request Testing Scope</a>
              </Link>
            </div>
          </ScrollReveal>
        </div>
      </section>
    </motion.div>
  );
}
